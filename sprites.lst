                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.0.4 #11941 (Mac OS X x86_64)
                                      4 ;--------------------------------------------------------
                                      5 	.module sprites
                                      6 	.optsdcc -mgbz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _init_player
                                     12 	.globl _init_fire
                                     13 	.globl _set_sprite_data
                                     14 	.globl _init_sprites
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 ;--------------------------------------------------------
                                     19 ; ram data
                                     20 ;--------------------------------------------------------
                                     21 	.area _DATA
                                     22 ;--------------------------------------------------------
                                     23 ; absolute external ram data
                                     24 ;--------------------------------------------------------
                                     25 	.area _DABS (ABS)
                                     26 ;--------------------------------------------------------
                                     27 ; global & static initialisations
                                     28 ;--------------------------------------------------------
                                     29 	.area _HOME
                                     30 	.area _GSINIT
                                     31 	.area _GSFINAL
                                     32 	.area _GSINIT
                                     33 ;--------------------------------------------------------
                                     34 ; Home
                                     35 ;--------------------------------------------------------
                                     36 	.area _HOME
                                     37 	.area _HOME
                                     38 ;--------------------------------------------------------
                                     39 ; code
                                     40 ;--------------------------------------------------------
                                     41 	.area _CODE
                                     42 ;src/sprites.c:11: void	init_fire(s *fire) {
                                     43 ;	---------------------------------
                                     44 ; Function init_fire
                                     45 ; ---------------------------------
      000000                         46 _init_fire::
      000000 E8 FC                   47 	add	sp, #-4
                                     48 ;src/sprites.c:13: fire->sprite_pos_world[0] = 7;
      000002 F8 06                   49 	ldhl	sp,#6
      000004 2A                      50 	ld	a, (hl+)
      000005 4F                      51 	ld	c, a
      000006 46                      52 	ld	b, (hl)
      000007 21 02 00                53 	ld	hl, #0x0002
      00000A 09                      54 	add	hl, bc
      00000B 33                      55 	inc	sp
      00000C 33                      56 	inc	sp
      00000D E5                      57 	push	hl
      00000E E1                      58 	pop	hl
      00000F E5                      59 	push	hl
      000010 36 07                   60 	ld	(hl), #0x07
                                     61 ;src/sprites.c:14: fire->sprite_pos_world[1] = 6;
      000012 21 03 00                62 	ld	hl, #0x0003
      000015 09                      63 	add	hl, bc
      000016 E5                      64 	push	hl
      000017 7D                      65 	ld	a, l
      000018 F8 04                   66 	ldhl	sp,	#4
      00001A 77                      67 	ld	(hl), a
      00001B E1                      68 	pop	hl
      00001C 7C                      69 	ld	a, h
      00001D F8 03                   70 	ldhl	sp,	#3
      00001F 32                      71 	ld	(hl-), a
      000020 2A                      72 	ld	a, (hl+)
      000021 66                      73 	ld	h, (hl)
      000022 6F                      74 	ld	l, a
      000023 36 06                   75 	ld	(hl), #0x06
                                     76 ;src/sprites.c:15: fire->sprite_pos_screen[0] = fire->sprite_pos_world[0] * 8;
      000025 D1                      77 	pop	de
      000026 D5                      78 	push	de
      000027 1A                      79 	ld	a, (de)
      000028 87                      80 	add	a, a
      000029 87                      81 	add	a, a
      00002A 87                      82 	add	a, a
      00002B 02                      83 	ld	(bc), a
                                     84 ;src/sprites.c:16: fire->sprite_pos_screen[1] = fire->sprite_pos_world[1] * 10;
      00002C 69                      85 	ld	l, c
      00002D 60                      86 	ld	h, b
      00002E 23                      87 	inc	hl
      00002F 33                      88 	inc	sp
      000030 33                      89 	inc	sp
      000031 E5                      90 	push	hl
      000032 F8 02                   91 	ldhl	sp,#2
      000034 2A                      92 	ld	a, (hl+)
      000035 5F                      93 	ld	e, a
      000036 56                      94 	ld	d, (hl)
      000037 1A                      95 	ld	a, (de)
      000038 5F                      96 	ld	e, a
      000039 87                      97 	add	a, a
      00003A 87                      98 	add	a, a
      00003B 83                      99 	add	a, e
      00003C 87                     100 	add	a, a
      00003D E1                     101 	pop	hl
      00003E E5                     102 	push	hl
      00003F 77                     103 	ld	(hl), a
                                    104 ;src/sprites.c:17: fire->sprite_animation_frame = 0;
      000040 21 05 00               105 	ld	hl, #0x0005
      000043 09                     106 	add	hl, bc
      000044 36 00                  107 	ld	(hl), #0x00
                                    108 ;src/sprites.c:18: fire->frame_skip = 6;
      000046 21 06 00               109 	ld	hl, #0x0006
      000049 09                     110 	add	hl, bc
      00004A 36 06                  111 	ld	(hl), #0x06
                                    112 ;src/sprites.c:22: set_sprite_data(0, FIRE_TILE_COUNT, FIRE);
      00004C 21r00r00               113 	ld	hl, #_FIRE
      00004F E5                     114 	push	hl
      000050 3E 18                  115 	ld	a, #0x18
      000052 F5                     116 	push	af
      000053 33                     117 	inc	sp
      000054 AF                     118 	xor	a, a
      000055 F5                     119 	push	af
      000056 33                     120 	inc	sp
      000057 CDr00r00               121 	call	_set_sprite_data
      00005A E8 04                  122 	add	sp, #4
                                    123 ;src/../include/../gbdk2020/include/gb/gb.h:999: shadow_OAM[nb].tile=tile;
      00005C 21r02r00               124 	ld	hl, #(_shadow_OAM + 0x0002)
      00005F 36 00                  125 	ld	(hl), #0x00
      000061 21r06r00               126 	ld	hl, #(_shadow_OAM + 0x0006)
      000064 36 02                  127 	ld	(hl), #0x02
                                    128 ;src/../include/../gbdk2020/include/gb/gb.h:1045: shadow_OAM[nb].prop=prop;
      000066 21r03r00               129 	ld	hl, #(_shadow_OAM + 0x0003)
      000069 36 10                  130 	ld	(hl), #0x10
      00006B 21r07r00               131 	ld	hl, #(_shadow_OAM + 0x0007)
      00006E 36 10                  132 	ld	(hl), #0x10
                                    133 ;src/sprites.c:27: move_sprite(0, fire->sprite_pos_screen[0], fire->sprite_pos_screen[1]);
      000070 D1                     134 	pop	de
      000071 D5                     135 	push	de
      000072 1A                     136 	ld	a, (de)
      000073 F8 02                  137 	ldhl	sp,	#2
      000075 77                     138 	ld	(hl), a
      000076 0A                     139 	ld	a, (bc)
      000077 23                     140 	inc	hl
      000078 77                     141 	ld	(hl), a
                                    142 ;src/../include/../gbdk2020/include/gb/gb.h:1072: OAM_item_t * itm = &shadow_OAM[nb];
      000079 11r00r00               143 	ld	de, #_shadow_OAM+0
                                    144 ;src/../include/../gbdk2020/include/gb/gb.h:1073: itm->y=y, itm->x=x;
      00007C 2B                     145 	dec	hl
      00007D 7E                     146 	ld	a, (hl)
      00007E 12                     147 	ld	(de), a
      00007F 13                     148 	inc	de
      000080 23                     149 	inc	hl
      000081 7E                     150 	ld	a, (hl)
      000082 12                     151 	ld	(de), a
                                    152 ;src/sprites.c:28: move_sprite(1, fire->sprite_pos_screen[0] + 8, fire->sprite_pos_screen[1]);
      000083 D1                     153 	pop	de
      000084 D5                     154 	push	de
      000085 1A                     155 	ld	a, (de)
      000086 77                     156 	ld	(hl), a
      000087 0A                     157 	ld	a, (bc)
      000088 C6 08                  158 	add	a, #0x08
      00008A 4F                     159 	ld	c, a
                                    160 ;src/../include/../gbdk2020/include/gb/gb.h:1072: OAM_item_t * itm = &shadow_OAM[nb];
      00008B 11r04r00               161 	ld	de, #_shadow_OAM+4
                                    162 ;src/../include/../gbdk2020/include/gb/gb.h:1073: itm->y=y, itm->x=x;
      00008E 7E                     163 	ld	a, (hl)
      00008F 12                     164 	ld	(de), a
      000090 13                     165 	inc	de
      000091 79                     166 	ld	a, c
      000092 12                     167 	ld	(de), a
                                    168 ;src/sprites.c:28: move_sprite(1, fire->sprite_pos_screen[0] + 8, fire->sprite_pos_screen[1]);
                                    169 ;src/sprites.c:29: }
      000093 E8 04                  170 	add	sp, #4
      000095 C9                     171 	ret
                                    172 ;src/sprites.c:31: void	init_player(s *pl) {
                                    173 ;	---------------------------------
                                    174 ; Function init_player
                                    175 ; ---------------------------------
      000096                        176 _init_player::
      000096 E8 FC                  177 	add	sp, #-4
                                    178 ;src/sprites.c:33: pl->sprite_pos_world[0] = 12;
      000098 F8 06                  179 	ldhl	sp,#6
      00009A 2A                     180 	ld	a, (hl+)
      00009B 4F                     181 	ld	c, a
      00009C 46                     182 	ld	b, (hl)
      00009D 21 02 00               183 	ld	hl, #0x0002
      0000A0 09                     184 	add	hl, bc
      0000A1 33                     185 	inc	sp
      0000A2 33                     186 	inc	sp
      0000A3 E5                     187 	push	hl
      0000A4 E1                     188 	pop	hl
      0000A5 E5                     189 	push	hl
      0000A6 36 0C                  190 	ld	(hl), #0x0c
                                    191 ;src/sprites.c:34: pl->sprite_pos_world[1] = 9;
      0000A8 21 03 00               192 	ld	hl, #0x0003
      0000AB 09                     193 	add	hl, bc
      0000AC E5                     194 	push	hl
      0000AD 7D                     195 	ld	a, l
      0000AE F8 04                  196 	ldhl	sp,	#4
      0000B0 77                     197 	ld	(hl), a
      0000B1 E1                     198 	pop	hl
      0000B2 7C                     199 	ld	a, h
      0000B3 F8 03                  200 	ldhl	sp,	#3
      0000B5 32                     201 	ld	(hl-), a
      0000B6 2A                     202 	ld	a, (hl+)
      0000B7 66                     203 	ld	h, (hl)
      0000B8 6F                     204 	ld	l, a
      0000B9 36 09                  205 	ld	(hl), #0x09
                                    206 ;src/sprites.c:35: pl->sprite_pos_screen[0] = pl->sprite_pos_world[0] * 8;
      0000BB D1                     207 	pop	de
      0000BC D5                     208 	push	de
      0000BD 1A                     209 	ld	a, (de)
      0000BE 87                     210 	add	a, a
      0000BF 87                     211 	add	a, a
      0000C0 87                     212 	add	a, a
      0000C1 02                     213 	ld	(bc), a
                                    214 ;src/sprites.c:36: pl->sprite_pos_screen[1] = pl->sprite_pos_world[1] * 8;
      0000C2 69                     215 	ld	l, c
      0000C3 60                     216 	ld	h, b
      0000C4 23                     217 	inc	hl
      0000C5 33                     218 	inc	sp
      0000C6 33                     219 	inc	sp
      0000C7 E5                     220 	push	hl
      0000C8 F8 02                  221 	ldhl	sp,#2
      0000CA 2A                     222 	ld	a, (hl+)
      0000CB 5F                     223 	ld	e, a
      0000CC 56                     224 	ld	d, (hl)
      0000CD 1A                     225 	ld	a, (de)
      0000CE 87                     226 	add	a, a
      0000CF 87                     227 	add	a, a
      0000D0 87                     228 	add	a, a
      0000D1 E1                     229 	pop	hl
      0000D2 E5                     230 	push	hl
      0000D3 77                     231 	ld	(hl), a
                                    232 ;src/sprites.c:37: pl->sprite_animation_frame = 0;
      0000D4 21 05 00               233 	ld	hl, #0x0005
      0000D7 09                     234 	add	hl, bc
      0000D8 36 00                  235 	ld	(hl), #0x00
                                    236 ;src/sprites.c:38: pl->frame_skip = 6;
      0000DA 21 06 00               237 	ld	hl, #0x0006
      0000DD 09                     238 	add	hl, bc
      0000DE 36 06                  239 	ld	(hl), #0x06
                                    240 ;src/sprites.c:39: set_sprite_data(38, PLAYER_TILE_COUNT, PLAYER);
      0000E0 21r00r00               241 	ld	hl, #_PLAYER
      0000E3 E5                     242 	push	hl
      0000E4 11 26 24               243 	ld	de, #0x2426
      0000E7 D5                     244 	push	de
      0000E8 CDr00r00               245 	call	_set_sprite_data
      0000EB E8 04                  246 	add	sp, #4
                                    247 ;src/../include/../gbdk2020/include/gb/gb.h:999: shadow_OAM[nb].tile=tile;
      0000ED 21r0Er00               248 	ld	hl, #(_shadow_OAM + 0x000e)
      0000F0 36 26                  249 	ld	(hl), #0x26
      0000F2 21r12r00               250 	ld	hl, #(_shadow_OAM + 0x0012)
      0000F5 36 28                  251 	ld	(hl), #0x28
                                    252 ;src/sprites.c:42: move_sprite(3, pl->sprite_pos_screen[0], pl->sprite_pos_screen[1]);
      0000F7 D1                     253 	pop	de
      0000F8 D5                     254 	push	de
      0000F9 1A                     255 	ld	a, (de)
      0000FA F8 02                  256 	ldhl	sp,	#2
      0000FC 77                     257 	ld	(hl), a
      0000FD 0A                     258 	ld	a, (bc)
      0000FE 23                     259 	inc	hl
      0000FF 77                     260 	ld	(hl), a
                                    261 ;src/../include/../gbdk2020/include/gb/gb.h:1072: OAM_item_t * itm = &shadow_OAM[nb];
      000100 11r0Cr00               262 	ld	de, #_shadow_OAM+12
                                    263 ;src/../include/../gbdk2020/include/gb/gb.h:1073: itm->y=y, itm->x=x;
      000103 2B                     264 	dec	hl
      000104 7E                     265 	ld	a, (hl)
      000105 12                     266 	ld	(de), a
      000106 13                     267 	inc	de
      000107 23                     268 	inc	hl
      000108 7E                     269 	ld	a, (hl)
      000109 12                     270 	ld	(de), a
                                    271 ;src/sprites.c:43: move_sprite(4, pl->sprite_pos_screen[0] + 8, pl->sprite_pos_screen[1]);
      00010A D1                     272 	pop	de
      00010B D5                     273 	push	de
      00010C 1A                     274 	ld	a, (de)
      00010D 77                     275 	ld	(hl), a
      00010E 0A                     276 	ld	a, (bc)
      00010F C6 08                  277 	add	a, #0x08
      000111 4F                     278 	ld	c, a
                                    279 ;src/../include/../gbdk2020/include/gb/gb.h:1072: OAM_item_t * itm = &shadow_OAM[nb];
      000112 11r10r00               280 	ld	de, #_shadow_OAM+16
                                    281 ;src/../include/../gbdk2020/include/gb/gb.h:1073: itm->y=y, itm->x=x;
      000115 7E                     282 	ld	a, (hl)
      000116 12                     283 	ld	(de), a
      000117 13                     284 	inc	de
      000118 79                     285 	ld	a, c
      000119 12                     286 	ld	(de), a
                                    287 ;src/sprites.c:43: move_sprite(4, pl->sprite_pos_screen[0] + 8, pl->sprite_pos_screen[1]);
                                    288 ;src/sprites.c:44: }
      00011A E8 04                  289 	add	sp, #4
      00011C C9                     290 	ret
                                    291 ;src/sprites.c:46: void	init_sprites(s *fire, s *pl) {
                                    292 ;	---------------------------------
                                    293 ; Function init_sprites
                                    294 ; ---------------------------------
      00011D                        295 _init_sprites::
                                    296 ;src/sprites.c:48: fire->o = 1;
      00011D C1                     297 	pop	bc
      00011E D1                     298 	pop	de
      00011F D5                     299 	push	de
      000120 C5                     300 	push	bc
      000121 21 07 00               301 	ld	hl, #0x0007
      000124 19                     302 	add	hl, de
      000125 36 01                  303 	ld	(hl), #0x01
                                    304 ;src/sprites.c:49: init_fire(fire);
      000127 D5                     305 	push	de
      000128 CDr00r00               306 	call	_init_fire
      00012B E8 02                  307 	add	sp, #2
                                    308 ;src/sprites.c:50: init_player(pl);
      00012D F8 04                  309 	ldhl	sp,	#4
      00012F 2A                     310 	ld	a, (hl+)
      000130 66                     311 	ld	h, (hl)
      000131 6F                     312 	ld	l, a
      000132 E5                     313 	push	hl
      000133 CDr96r00               314 	call	_init_player
      000136 E8 02                  315 	add	sp, #2
                                    316 ;src/sprites.c:51: }
      000138 C9                     317 	ret
                                    318 	.area _CODE
                                    319 	.area _CABS (ABS)
